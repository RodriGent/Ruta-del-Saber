<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruta del Saber</title>
    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --accent: #ff9a00;
            --success: #28a745;
            --danger: #dc3545;
            --dark: #1a1a2e;
            --light: #f8f9fa;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark), #16213e);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }
        
        .screen {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        .graffiti-title {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff5f1f, #ff8c00, #ffdd00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 95, 31, 0.5);
            font-weight: 900;
            font-style: italic;
            text-transform: uppercase;
        }
        
        .subtitle {
            text-align: center;
            color: #aaa;
            margin-bottom: 30px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            margin: 10px 0;
        }
        
        .start-btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.4);
        }
        
        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 17, 203, 0.6);
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 15px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-label {
            display: block;
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent);
        }
        
        .timer-container {
            text-align: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 15px;
        }
        
        .timer {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            transition: color 0.3s ease;
        }
        
        .timer.normal {
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .timer.warning {
            color: #ff9a00;
            text-shadow: 0 0 10px rgba(255, 154, 0, 0.5);
            animation: pulse 1s infinite;
        }
        
        .timer.danger {
            color: #ff3333;
            text-shadow: 0 0 10px rgba(255, 51, 51, 0.5);
            animation: pulse 0.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .timer-label {
            color: #aaa;
            font-size: 1rem;
        }
        
        .question-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .question-category {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .question-text {
            font-size: 1.3rem;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .option-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .option-card:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .option-card.selected {
            background: rgba(106, 17, 203, 0.2);
            border-color: var(--primary);
        }
        
        .option-card.correct {
            background: rgba(40, 167, 69, 0.3);
            border-color: var(--success);
        }
        
        .option-card.incorrect {
            background: rgba(220, 53, 69, 0.3);
            border-color: var(--danger);
        }
        
        .option-letter {
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .option-text {
            flex: 1;
            font-size: 1rem;
        }
        
        .feedback-message {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            display: none;
        }
        
        .feedback-message.correct {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success);
            border: 1px solid rgba(40, 167, 69, 0.3);
        }
        
        .feedback-message.incorrect {
            background: rgba(220, 53, 69, 0.2);
            color: var(--danger);
            border: 1px solid rgba(220, 53, 69, 0.3);
        }
        
        .level-indicator {
            text-align: center;
            font-size: 1.2rem;
            margin: 10px 0;
            color: var(--accent);
        }
        
        .results-container {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 30px;
            margin-top: 20px;
        }
        
        .final-score {
            font-size: 3rem;
            font-weight: bold;
            color: var(--accent);
            margin: 20px 0;
        }
        
        .advice-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid var(--accent);
        }
        
        .game-rules {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .game-rules h3 {
            color: var(--accent);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .game-rules ul {
            list-style: none;
            padding: 0;
        }
        
        .game-rules li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
        }
        
        .game-rules li:last-child {
            border-bottom: none;
        }
        
        .game-rules strong {
            color: var(--accent);
        }
        
        .explanation-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            border-left: 4px solid var(--accent);
        }
        
        @media (max-width: 768px) {
            .graffiti-title {
                font-size: 2.2rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .timer {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Pantalla de Inicio -->
    <div class="screen active" id="start-screen">
        <h1 class="graffiti-title">Ruta del Saber</h1>
        <p class="subtitle">Domina el conocimiento</p>
        
        <div class="welcome-message">
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--accent);">¬°Prep√°rate para el desaf√≠o!</h2>
            <p style="text-align: center; margin-bottom: 15px; line-height: 1.6;">Demuestra lo que sabes en matem√°ticas, ciencias, historia y m√°s.</p>
            
            <div class="game-rules">
                <h3>üèÜ Reglas del Juego</h3>
                <ul>
                    <li><strong>‚è±Ô∏è Tiempo l√≠mite:</strong> 30 segundos por pregunta</li>
                    <li><strong>üéØ Sistema de niveles:</strong> 5 niveles progresivos</li>
                    <li><strong>‚úÖ Si aciertas:</strong> Avanzas a la siguiente pregunta</li>
                    <li><strong>‚ùå Si fallas:</strong> Te quedas en la misma pregunta</li>
                    <li><strong>üöÄ Completa cada nivel:</strong> Para desbloquear el siguiente</li>
                    <li><strong>üí° Retroalimentaci√≥n:</strong> Ver√°s la respuesta correcta si fallas</li>
                </ul>
            </div>
            
            <div class="explanation-box">
                <h4>üìñ ¬øC√≥mo jugar?</h4>
                <p>1. Lee cada pregunta cuidadosamente</p>
                <p>2. Selecciona la respuesta que creas correcta</p>
                <p>3. Confirma tu respuesta antes de que se acabe el tiempo</p>
                <p>4. Si aciertas, pasar√°s a la siguiente pregunta</p>
                <p>5. Si fallas, ver√°s la respuesta correcta y podr√°s intentarlo de nuevo</p>
                <p>6. ¬°Completa todos los niveles para convertirte en un Maestro del Saber!</p>
            </div>
        </div>
        
        <button class="btn start-btn" id="start-btn">
            <span>üéØ</span> Comenzar Juego
        </button>
    </div>
    <!-- Pantalla del Juego -->
<div class="screen" id="game-screen">
    <h1 class="graffiti-title">Ruta del Saber</h1>
    
    <div class="stats-bar">
        <div class="stat">
            <span class="stat-label">Nivel</span>
            <span class="stat-value" id="level">1</span>
        </div>
        <div class="stat">
            <span class="stat-label">Pregunta</span>
            <span class="stat-value" id="question-count">1/5</span>
        </div>
    </div>
    
    <div class="timer-container">
        <div class="timer normal" id="timer">30</div>
        <div class="timer-label">segundos restantes</div>
    </div>
    
    <div class="level-indicator">
        Nivel <span id="current-level">1</span> - <span id="level-name">Principiante</span>
    </div>
    
    <div class="question-container">
        <div class="question-category" id="category">Matem√°ticas</div>
        <p class="question-text" id="question-text">¬øCu√°l es el valor de œÄ (pi) redondeado a dos decimales?</p>
    </div>
    
    <div class="options-container" id="options-container">
        <!-- Las opciones se generar√°n con JavaScript -->
    </div>
    
    <div class="feedback-message" id="feedback-message">
        <!-- Mensaje de retroalimentaci√≥n -->
    </div>
    
    <button class="btn submit-btn" id="submit-btn" disabled style="background: linear-gradient(to right, var(--primary), var(--secondary)); color: white;">
        <span>‚úÖ</span> Confirmar Respuesta
    </button>
</div>

<!-- Pantalla de Resultados -->
<div class="screen" id="results-screen">
    <h1 class="graffiti-title" id="results-title">¬°Nivel Completado!</h1>
    
    <div class="results-container">
        <div class="final-score" id="final-level">Nivel 1</div>
        
        <div class="advice-section">
            <h3>üí° Reflexi√≥n:</h3>
            <p id="advice-text">Sigue practicando para subir de nivel.</p>
        </div>
        
        <p style="margin: 20px 0; color: #aaa;" id="encouragement-text">¬°Cada nivel superado te acerca a dominar el conocimiento!</p>
        
        <button class="btn start-btn" id="next-level-btn">
            <span>üöÄ</span> Siguiente Nivel
        </button>
        
        <button class="btn" id="menu-btn" style="background: rgba(255, 255, 255, 0.1); color: var(--light);">
            <span>üè†</span> Volver al Men√∫
        </button>
    </div>
</div>
    <script>
    // Variables del juego
    let currentLevel = 1;
    let currentQuestionIndex = 0;
    let selectedOption = null;
    let timeLeft = 30;
    let timerInterval;
    let isAnswerSubmitted = false;
    
    // Elementos del DOM
    const startScreen = document.getElementById('start-screen');
    const gameScreen = document.getElementById('game-screen');
    const resultsScreen = document.getElementById('results-screen');
    const startBtn = document.getElementById('start-btn');
    const levelElement = document.getElementById('level');
    const questionCountElement = document.getElementById('question-count');
    const currentLevelElement = document.getElementById('current-level');
    const levelNameElement = document.getElementById('level-name');
    const categoryElement = document.getElementById('category');
    const questionTextElement = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options-container');
    const submitBtn = document.getElementById('submit-btn');
    const feedbackMessage = document.getElementById('feedback-message');
    const timerElement = document.getElementById('timer');
    const finalLevelElement = document.getElementById('final-level');
    const resultsTitle = document.getElementById('results-title');
    const adviceTextElement = document.getElementById('advice-text');
    const encouragementTextElement = document.getElementById('encouragement-text');
    const nextLevelBtn = document.getElementById('next-level-btn');
    const menuBtn = document.getElementById('menu-btn');
    
    // Nombres de niveles
    const levelNames = {
        1: "Principiante",
        2: "Aprendiz",
        3: "Intermedio", 
        4: "Avanzado",
        5: "Experto",
        6: "Maestro del Saber"
    };
    
    // Preguntas organizadas por nivel (5 preguntas por nivel)
    const questionsByLevel = {
        1: [
            {
                category: "Matem√°ticas",
                text: "¬øCu√°l es el resultado de 7 √ó 8 + 15 √∑ 3?",
                options: [
                    { text: "61", correct: true },
                    { text: "59", correct: false },
                    { text: "63", correct: false },
                    { text: "65", correct: false }
                ]
            },
            {
                category: "Ciencias",
                text: "¬øQu√© planeta es conocido como el 'planeta rojo'?",
                options: [
                    { text: "Venus", correct: false },
                    { text: "Marte", correct: true },
                    { text: "J√∫piter", correct: false },
                    { text: "Saturno", correct: false }
                ]
            },
            {
                category: "Historia",
                text: "¬øEn qu√© a√±o el hombre lleg√≥ a la Luna por primera vez?",
                options: [
                    { text: "1965", correct: false },
                    { text: "1969", correct: true },
                    { text: "1972", correct: false },
                    { text: "1958", correct: false }
                ]
            },
            {
                category: "Geograf√≠a",
                text: "¬øCu√°l es el oc√©ano m√°s grande del mundo?",
                options: [
                    { text: "Atl√°ntico", correct: false },
                    { text: "√çndico", correct: false },
                    { text: "Pac√≠fico", correct: true },
                    { text: "√Årtico", correct: false }
                ]
            },
            {
                category: "Literatura",
                text: "¬øQui√©n escribi√≥ 'Cien a√±os de soledad'?",
                options: [
                    { text: "Pablo Neruda", correct: false },
                    { text: "Julio Cort√°zar", correct: false },
                    { text: "Gabriel Garc√≠a M√°rquez", correct: true },
                    { text: "Mario Vargas Llosa", correct: false }
                ]
            }
        ],
        2: [
            {
                category: "Matem√°ticas",
                text: "¬øCu√°l es el valor de x en la ecuaci√≥n: 3x - 7 = 14?",
                options: [
                    { text: "5", correct: false },
                    { text: "6", correct: false },
                    { text: "7", correct: true },
                    { text: "8", correct: false }
                ]
            },
            {
                category: "F√≠sica",
                text: "¬øQu√© ley establece que 'a toda acci√≥n le corresponde una reacci√≥n igual y opuesta'?",
                options: [
                    { text: "Primera ley de Newton", correct: false },
                    { text: "Segunda ley de Newton", correct: false },
                    { text: "Tercera ley de Newton", correct: true },
                    { text: "Ley de la gravitaci√≥n universal", correct: false }
                ]
            },
            {
                category: "Qu√≠mica",
                text: "¬øCu√°l es el elemento qu√≠mico m√°s abundante en el universo?",
                options: [
                    { text: "Ox√≠geno", correct: false },
                    { text: "Carbono", correct: false },
                    { text: "Hidr√≥geno", correct: true },
                    { text: "Helio", correct: false }
                ]
            },
            {
                category: "Biolog√≠a",
                text: "¬øQu√© cient√≠fico es conocido por su teor√≠a de la evoluci√≥n?",
                options: [
                    { text: "Gregor Mendel", correct: false },
                    { text: "Charles Darwin", correct: true },
                    { text: "Louis Pasteur", correct: false },
                    { text: "Alexander Fleming", correct: false }
                ]
            },
            {
                category: "Historia Universal",
                text: "¬øEn qu√© siglo comenz√≥ la Primera Guerra Mundial?",
                options: [
                    { text: "XIX", correct: false },
                    { text: "XX", correct: true },
                    { text: "XVIII", correct: false },
                    { text: "XXI", correct: false }
                ]
            }
        ],
        3: [
            {
                category: "Matem√°ticas Avanzadas",
                text: "¬øCu√°l es la derivada de f(x) = 3x¬≤ + 2x - 5?",
                options: [
                    { text: "6x + 2", correct: true },
                    { text: "3x + 2", correct: false },
                    { text: "6x - 5", correct: false },
                    { text: "3x¬≤ + 2", correct: false }
                ]
            },
            {
                category: "F√≠sica Cu√°ntica",
                text: "¬øQu√© part√≠cula subat√≥mica tiene carga positiva?",
                options: [
                    { text: "Electr√≥n", correct: false },
                    { text: "Prot√≥n", correct: true },
                    { text: "Neutr√≥n", correct: false },
                    { text: "Fot√≥n", correct: false }
                ]
            },
            {
                category: "Qu√≠mica Org√°nica",
                text: "¬øQu√© compuesto es conocido como el principal componente del vinagre?",
                options: [
                    { text: "√Åcido c√≠trico", correct: false },
                    { text: "√Åcido ac√©tico", correct: true },
                    { text: "√Åcido sulf√∫rico", correct: false },
                    { text: "√Åcido clorh√≠drico", correct: false }
                ]
            },
            {
                category: "Biolog√≠a Molecular",
                text: "¬øQu√© mol√©cula almacena la informaci√≥n gen√©tica en los seres vivos?",
                options: [
                    { text: "ARN", correct: false },
                    { text: "ADN", correct: true },
                    { text: "Prote√≠na", correct: false },
                    { text: "L√≠pido", correct: false }
                ]
            },
            {
                category: "Historia del Arte",
                text: "¬øQu√© artista pint√≥ 'La noche estrellada'?",
                options: [
                    { text: "Pablo Picasso", correct: false },
                    { text: "Vincent van Gogh", correct: true },
                    { text: "Claude Monet", correct: false },
                    { text: "Salvador Dal√≠", correct: false }
                ]
            }
        ],
        4: [
            {
                category: "C√°lculo",
                text: "¬øCu√°l es el l√≠mite de (x¬≤ - 4)/(x - 2) cuando x tiende a 2?",
                options: [
                    { text: "0", correct: false },
                    { text: "2", correct: false },
                    { text: "4", correct: true },
                    { text: "No existe", correct: false }
                ]
            },
            {
                category: "F√≠sica Relativista",
                text: "¬øQu√© famosa ecuaci√≥n relaciona masa y energ√≠a?",
                options: [
                    { text: "E = mc", correct: false },
                    { text: "E = mc¬≤", correct: true },
                    { text: "E = m¬≤c", correct: false },
                    { text: "E = m/c¬≤", correct: false }
                ]
            },
            {
                category: "Qu√≠mica Inorg√°nica",
                text: "¬øQu√© gas noble se utiliza en globos aerost√°ticos?",
                options: [
                    { text: "Ne√≥n", correct: false },
                    { text: "Helio", correct: true },
                    { text: "Arg√≥n", correct: false },
                    { text: "Kript√≥n", correct: false }
                ]
            },
            {
                category: "Gen√©tica",
                text: "¬øCu√°ntos cromosomas tiene una c√©lula humana normal?",
                options: [
                    { text: "23", correct: false },
                    { text: "46", correct: true },
                    { text: "48", correct: false },
                    { text: "52", correct: false }
                ]
            },
            {
                category: "Filosof√≠a",
                text: "¬øQu√© fil√≥sofo dijo 'Solo s√© que no s√© nada'?",
                options: [
                    { text: "Plat√≥n", correct: false },
                    { text: "Arist√≥teles", correct: false },
                    { text: "S√≥crates", correct: true },
                    { text: "Descartes", correct: false }
                ]
            }
        ],
        5: [
            {
                category: "Matem√°ticas Superiores",
                text: "¬øCu√°l es la integral de 1/x dx?",
                options: [
                    { text: "x¬≤/2 + C", correct: false },
                    { text: "ln|x| + C", correct: true },
                    { text: "1/x¬≤ + C", correct: false },
                    { text: "x + C", correct: false }
                ]
            },
            {
                category: "Astrof√≠sica",
                text: "¬øQu√© tipo de estrella es nuestro Sol?",
                options: [
                    { text: "Gigante roja", correct: false },
                    { text: "Enana blanca", correct: false },
                    { text: "Enana amarilla", correct: true },
                    { text: "Supergigante azul", correct: false }
                ]
            },
            {
                category: "Bioqu√≠mica",
                text: "¬øQu√© enzima descompone el almid√≥n en az√∫cares simples?",
                options: [
                    { text: "Pepsina", correct: false },
                    { text: "Amilasa", correct: true },
                    { text: "Lipasa", correct: false },
                    { text: "Tripsina", correct: false }
                ]
            },
            {
                category: "Ling√º√≠stica",
                text: "¬øCu√°l es la lengua romance con m√°s hablantes nativos?",
                options: [
                    { text: "Portugu√©s", correct: false },
                    { text: "Franc√©s", correct: false },
                    { text: "Espa√±ol", correct: true },
                    { text: "Italiano", correct: false }
                ]
            },
            {
                category: "Econom√≠a",
                text: "¬øQu√© economista escribi√≥ 'La riqueza de las naciones'?",
                options: [
                    { text: "Karl Marx", correct: false },
                    { text: "John Maynard Keynes", correct: false },
                    { text: "Adam Smith", correct: true },
                    { text: "Milton Friedman", correct: false }
                ]
            }
        ]
    };
    
    // Inicializaci√≥n del juego
    function initGame() {
        startBtn.addEventListener('click', startGame);
        nextLevelBtn.addEventListener('click', nextLevel);
        menuBtn.addEventListener('click', backToMenu);
        submitBtn.addEventListener('click', submitAnswer);
    }
    
    // Iniciar el juego
    function startGame() {
        currentLevel = 1;
        currentQuestionIndex = 0;
        showScreen(gameScreen);
        loadQuestion();
        startTimer();
    }
    
    // Cargar pregunta actual
    function loadQuestion() {
        const questions = questionsByLevel[currentLevel];
        const question = questions[currentQuestionIndex];
        
        // Actualizar elementos de la interfaz
        levelElement.textContent = currentLevel;
        currentLevelElement.textContent = currentLevel;
        levelNameElement.textContent = levelNames[currentLevel];
        questionCountElement.textContent = `${currentQuestionIndex + 1}/${questions.length}`;
        categoryElement.textContent = question.category;
        questionTextElement.textContent = question.text;
        
        // Limpiar opciones anteriores
        optionsContainer.innerHTML = '';
        
        // Generar nuevas opciones
        const letters = ['A', 'B', 'C', 'D'];
        question.options.forEach((option, index) => {
            const optionCard = document.createElement('div');
            optionCard.className = 'option-card';
            optionCard.innerHTML = `
                <div class="option-letter">${letters[index]}</div>
                <div class="option-text">${option.text}</div>
            `;
            
            optionCard.addEventListener('click', () => selectOption(optionCard, index));
            optionsContainer.appendChild(optionCard);
        });
        
        // Reiniciar estado
        selectedOption = null;
        isAnswerSubmitted = false;
        submitBtn.disabled = true;
        feedbackMessage.style.display = 'none';
        
        // Reiniciar y comenzar temporizador
        resetTimer();
        startTimer();
    }
    
    // Seleccionar una opci√≥n
    function selectOption(optionCard, optionIndex) {
        if (isAnswerSubmitted) return;
        
        // Deseleccionar todas las opciones
        document.querySelectorAll('.option-card').forEach(card => {
            card.classList.remove('selected');
        });
        
        // Seleccionar la opci√≥n clickeada
        optionCard.classList.add('selected');
        selectedOption = optionIndex;
        submitBtn.disabled = false;
    }
    
    // Enviar respuesta
    function submitAnswer() {
        if (selectedOption === null || isAnswerSubmitted) return;
        
        isAnswerSubmitted = true;
        clearInterval(timerInterval);
        
        const questions = questionsByLevel[currentLevel];
        const question = questions[currentQuestionIndex];
        const isCorrect = question.options[selectedOption].correct;
        
        // Mostrar retroalimentaci√≥n
        if (isCorrect) {
            feedbackMessage.textContent = '¬°Respuesta correcta! üéâ';
            feedbackMessage.className = 'feedback-message correct';
            feedbackMessage.style.display = 'block';
            
            // Avanzar a la siguiente pregunta despu√©s de un breve tiempo
            setTimeout(() => {
                currentQuestionIndex++;
                
                if (currentQuestionIndex < questions.length) {
                    loadQuestion();
                } else {
                    completeLevel();
                }
            }, 1500);
        } else {
            feedbackMessage.textContent = 'Respuesta incorrecta. Intenta de nuevo. üí°';
            feedbackMessage.className = 'feedback-message incorrect';
            feedbackMessage.style.display = 'block';
            
            // Resaltar la respuesta correcta
            document.querySelectorAll('.option-card').forEach((card, index) => {
                if (question.options[index].correct) {
                    card.classList.add('correct');
                } else if (index === selectedOption) {
                    card.classList.add('incorrect');
                }
            });
            
            // Permitir intentar de nuevo despu√©s de un breve tiempo
            setTimeout(() => {
                resetQuestionForRetry();
            }, 2000);
        }
    }
    
    // Reiniciar pregunta para reintento
    function resetQuestionForRetry() {
        feedbackMessage.style.display = 'none';
        document.querySelectorAll('.option-card').forEach(card => {
            card.classList.remove('correct', 'incorrect', 'selected');
        });
        selectedOption = null;
        isAnswerSubmitted = false;
        submitBtn.disabled = true;
        resetTimer();
        startTimer();
    }
            // Temporizador mejorado
        function startTimer() {
            clearInterval(timerInterval); // Limpiar cualquier temporizador anterior
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft < 10 ? `0${timeLeft}` : timeLeft;
                
                // Cambiar color seg√∫n el tiempo restante
                if (timeLeft <= 10) {
                    timerElement.className = 'timer warning';
                }
                
                if (timeLeft <= 5) {
                    timerElement.className = 'timer danger';
                }
                
                // Cuando se acaba el tiempo
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = "00";
                    timerElement.className = 'timer danger';
                    
                    // Si no se ha enviado respuesta, mostrar tiempo agotado
                    if (!isAnswerSubmitted) {
                        feedbackMessage.textContent = '‚è∞ ¬°Tiempo agotado! Intenta de nuevo.';
                        feedbackMessage.className = 'feedback-message incorrect';
                        feedbackMessage.style.display = 'block';
                        
                        // Mostrar la respuesta correcta
                        const questions = questionsByLevel[currentLevel];
                        const question = questions[currentQuestionIndex];
                        document.querySelectorAll('.option-card').forEach((card, index) => {
                            if (question.options[index].correct) {
                                card.classList.add('correct');
                            }
                        });
                        
                        // Permitir reintento despu√©s de un tiempo
                        setTimeout(() => {
                            resetQuestionForRetry();
                        }, 2000);
                    }
                }
            }, 1000);
        }
        
        // Reiniciar temporizador
        function resetTimer() {
            clearInterval(timerInterval);
            timeLeft = 30;
            timerElement.textContent = timeLeft;
            timerElement.className = 'timer normal';
        }
        
        // Completar nivel
        function completeLevel() {
            showScreen(resultsScreen);
            finalLevelElement.textContent = `Nivel ${currentLevel}`;
            
            if (currentLevel < 5) {
                resultsTitle.textContent = '¬°Nivel Completado!';
                adviceTextElement.textContent = '¬°Felicidades! Has demostrado tus conocimientos.';
                encouragementTextElement.textContent = 'Prep√°rate para el siguiente desaf√≠o.';
                nextLevelBtn.style.display = 'flex';
            } else {
                resultsTitle.textContent = '¬°Felicidades!';
                adviceTextElement.textContent = 'Has completado todos los niveles. Eres un verdadero Maestro del Saber.';
                encouragementTextElement.textContent = '¬°Comparte tu logro con tus amigos!';
                nextLevelBtn.style.display = 'none';
            }
        }
        
        // Siguiente nivel
        function nextLevel() {
            currentLevel++;
            currentQuestionIndex = 0;
            showScreen(gameScreen);
            loadQuestion();
        }
        
        // Volver al men√∫
        function backToMenu() {
            showScreen(startScreen);
        }
        
        // Mostrar pantalla espec√≠fica
        function showScreen(screen) {
            document.querySelectorAll('.screen').forEach(s => {
                s.classList.remove('active');
            });
            screen.classList.add('active');
        }
        
        // Inicializar el juego cuando se carga la p√°gina
        window.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>  
